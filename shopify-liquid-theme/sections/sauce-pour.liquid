<style>
  .sauce-pour {
    position: relative;
    min-height: 120vh;
    background: linear-gradient(180deg, #1a1410 0%, #0a0a0a 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  .sauce-pour__container {
    position: relative;
    width: 100%;
    max-width: 1200px;
    padding: 100px 40px;
  }

  .sauce-pour__headline {
    text-align: center;
    font-size: clamp(40px, 6vw, 90px);
    font-weight: 700;
    color: #fff;
    margin-bottom: 100px;
    opacity: 0;
    transform: translateY(40px);
    transition: all 1.2s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .sauce-pour__headline.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .sauce-pour__scene {
    position: relative;
    height: 600px;
    display: flex;
    align-items: flex-start;
    justify-content: center;
  }

  .sauce-pour__bottle {
    position: absolute;
    top: -50px;
    left: 50%;
    transform: translateX(-50%) rotate(0deg);
    width: 120px;
    height: 280px;
    transition: all 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    filter: drop-shadow(0 20px 40px rgba(0, 0, 0, 0.5));
  }

  .sauce-pour__bottle.pouring {
    transform: translateX(-20%) rotate(-65deg);
    top: 80px;
  }

  .sauce-pour__stream {
    position: absolute;
    top: 180px;
    left: 50%;
    width: 12px;
    height: 0;
    background: linear-gradient(180deg, 
      rgba(255, 107, 53, 1) 0%,
      rgba(196, 30, 0, 1) 50%,
      rgba(196, 30, 0, 0.9) 100%
    );
    border-radius: 6px;
    transform: translateX(-50%);
    opacity: 0;
    transition: all 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
    box-shadow: 0 0 20px rgba(255, 107, 53, 0.6);
  }

  .sauce-pour__stream.flowing {
    height: 250px;
    opacity: 1;
  }

  .sauce-pour__stream::before,
  .sauce-pour__stream::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 20px;
    background: inherit;
    border-radius: 50%;
  }

  .sauce-pour__stream::before {
    top: 0;
    animation: drip 0.8s ease-in-out infinite;
  }

  .sauce-pour__stream::after {
    bottom: 0;
    animation: splash 0.8s ease-in-out infinite;
  }

  @keyframes drip {
    0%, 100% { transform: scaleY(1); }
    50% { transform: scaleY(1.3); }
  }

  @keyframes splash {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.5); }
  }

  .sauce-pour__plate {
    position: absolute;
    bottom: 100px;
    left: 50%;
    transform: translateX(-50%);
    width: 400px;
    height: 300px;
    opacity: 0;
    transition: opacity 1s ease;
  }

  .sauce-pour__plate.visible {
    opacity: 1;
  }

  .sauce-puddle {
    position: absolute;
    bottom: 180px;
    left: 50%;
    transform: translateX(-50%) scale(0);
    width: 80px;
    height: 80px;
    background: radial-gradient(circle, rgba(196, 30, 0, 1) 0%, rgba(196, 30, 0, 0.8) 100%);
    border-radius: 50%;
    transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
    filter: drop-shadow(0 10px 30px rgba(196, 30, 0, 0.6));
  }

  .sauce-puddle.growing {
    transform: translateX(-50%) scale(1);
  }

  .sauce-puddle.expanded {
    transform: translateX(-50%) scale(1.8);
    border-radius: 40%;
  }

  .splash-particle {
    position: absolute;
    width: 8px;
    height: 8px;
    background: rgba(255, 107, 53, 0.9);
    border-radius: 50%;
    opacity: 0;
    animation: splashOut 1.2s ease-out forwards;
  }

  @keyframes splashOut {
    0% {
      opacity: 1;
      transform: translate(0, 0) scale(1);
    }
    100% {
      opacity: 0;
      transform: translate(var(--tx), var(--ty)) scale(0);
    }
  }

  .sauce-pour__cta {
    text-align: center;
    margin-top: 80px;
    opacity: 0;
    transform: translateY(20px);
    transition: all 1s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .sauce-pour__cta.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .sauce-pour__button {
    display: inline-block;
    padding: 18px 48px;
    background: linear-gradient(135deg, #ff6b35 0%, #c41e00 100%);
    color: #fff;
    text-decoration: none;
    font-size: 18px;
    font-weight: 600;
    border-radius: 50px;
    transition: all 0.3s ease;
    box-shadow: 0 10px 40px rgba(255, 107, 53, 0.3);
    letter-spacing: 0.05em;
    text-transform: uppercase;
  }

  .sauce-pour__button:hover {
    transform: translateY(-2px);
    box-shadow: 0 15px 50px rgba(255, 107, 53, 0.5);
  }
</style>

<div class="sauce-pour" data-section-id="{{ section.id }}">
  <div class="sauce-pour__container">
    <h2 class="sauce-pour__headline">{{ section.settings.headline }}</h2>

    <div class="sauce-pour__scene">
      <!-- Bottle -->
      <div class="sauce-pour__bottle">
        <svg viewBox="0 0 80 200" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M 30 10 L 28 25 L 25 40 L 25 150 C 25 170, 30 180, 40 180 C 50 180, 55 170, 55 150 L 55 40 L 52 25 L 50 10 Z" 
                fill="url(#bottleGlass)" opacity="0.95"/>
          <path d="M 26 100 L 26 150 C 26 165, 30 175, 40 175 C 50 175, 54 165, 54 150 L 54 100 Z" 
                fill="url(#bottleSauce)"/>
          <path d="M 32 50 L 32 120" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
          <rect x="27" y="70" width="26" height="40" rx="2" fill="#1a1a1a" opacity="0.7"/>
          
          <defs>
            <linearGradient id="bottleGlass" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.2" />
              <stop offset="50%" style="stop-color:#ffffff;stop-opacity:0.05" />
              <stop offset="100%" style="stop-color:#000000;stop-opacity:0.1" />
            </linearGradient>
            <linearGradient id="bottleSauce" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" style="stop-color:#ff6b35;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#c41e00;stop-opacity:1" />
            </linearGradient>
          </defs>
        </svg>
      </div>

      <!-- Sauce Stream -->
      <div class="sauce-pour__stream"></div>

      <!-- Splash Particles Container -->
      <div class="sauce-pour__splash-container"></div>

      <!-- Sauce Puddle -->
      <div class="sauce-puddle"></div>

      <!-- Plate/Food -->
      <div class="sauce-pour__plate">
        <svg viewBox="0 0 400 300" fill="none" xmlns="http://www.w3.org/2000/svg">
          <!-- Plate -->
          <ellipse cx="200" cy="200" rx="180" ry="80" fill="url(#plateGradient)"/>
          <ellipse cx="200" cy="195" rx="160" ry="70" fill="#f5f5f5"/>
          
          <!-- Food item (steak/protein) -->
          <ellipse cx="200" cy="180" rx="80" ry="40" fill="#8b4513"/>
          <ellipse cx="200" cy="175" rx="75" ry="38" fill="#a0522d"/>
          <path d="M 150 175 Q 160 165, 180 170 Q 200 168, 220 170 Q 240 165, 250 175" 
                stroke="#6b3410" stroke-width="2" fill="none"/>
          
          <defs>
            <linearGradient id="plateGradient" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.3" />
              <stop offset="100%" style="stop-color:#cccccc;stop-opacity:0.5" />
            </linearGradient>
          </defs>
        </svg>
      </div>
    </div>

    <div class="sauce-pour__cta">
      <a href="{{ section.settings.button_link }}" class="sauce-pour__button">
        {{ section.settings.button_text }}
      </a>
    </div>
  </div>
</div>

<script>
  (function() {
    const section = document.querySelector('[data-section-id="{{ section.id }}"]');
    const headline = section.querySelector('.sauce-pour__headline');
    const bottle = section.querySelector('.sauce-pour__bottle');
    const stream = section.querySelector('.sauce-pour__stream');
    const plate = section.querySelector('.sauce-pour__plate');
    const puddle = section.querySelector('.sauce-puddle');
    const cta = section.querySelector('.sauce-pour__cta');
    const splashContainer = section.querySelector('.sauce-pour__splash-container');
    
    let animated = false;
    
    const createSplash = () => {
      for (let i = 0; i < 12; i++) {
        const particle = document.createElement('div');
        particle.className = 'splash-particle';
        
        const angle = (Math.PI * 2 * i) / 12;
        const distance = 40 + Math.random() * 40;
        const tx = Math.cos(angle) * distance;
        const ty = Math.sin(angle) * distance;
        
        particle.style.setProperty('--tx', `${tx}px`);
        particle.style.setProperty('--ty', `${ty}px`);
        particle.style.left = '50%';
        particle.style.bottom = '180px';
        particle.style.animationDelay = `${i * 0.05}s`;
        
        splashContainer.appendChild(particle);
        setTimeout(() => particle.remove(), 1200);
      }
    };
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting && !animated) {
          animated = true;
          
          // Animate sequence
          setTimeout(() => headline.classList.add('visible'), 200);
          setTimeout(() => plate.classList.add('visible'), 600);
          
          setTimeout(() => {
            bottle.classList.add('pouring');
          }, 1200);
          
          setTimeout(() => {
            stream.classList.add('flowing');
          }, 1800);
          
          setTimeout(() => {
            puddle.classList.add('growing');
          }, 2300);
          
          setTimeout(() => {
            puddle.classList.add('expanded');
            createSplash();
          }, 2600);
          
          setTimeout(() => {
            cta.classList.add('visible');
          }, 3200);
        }
      });
    }, { threshold: 0.3 });
    
    observer.observe(section);
  })();
</script>

{% schema %}
{
  "name": "Sauce Pour Animation",
  "settings": [
    {
      "type": "text",
      "id": "headline",
      "label": "Headline",
      "default": "Pure Perfection"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    }
  ],
  "presets": [
    {
      "name": "Sauce Pour Animation"
    }
  ]
}
{% endschema %}
